<!--create dialog-->
<div id="create-form" class="modal fade" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form class="form-edit" enctype="multipart/form-data" #CreateClient="ngForm" (ngSubmit)="onSave(CreateClient)">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Client</h4>
      </div>
      <div class="modal-body">
        <div class="row">
          <input name= "id" ngModel hidden>
          <input name= "createdby" ngModel hidden>
          <input name= "creation_time" ngModel hidden>
          <input name= "last_modify_by" ngModel hidden>
          <input name= "last_modify_time" ngModel hidden>
          <input name= "password_lastmodify" ngModel hidden>
          <input name= "images_iid" ngModel hidden>
          <input name= "usertype_id" ngModel hidden>
          <input name= "image_path" ngModel hidden>

            <div >
              <div class="col-sm-12">
                <div class="form-group">
                  <img id="preview" src="#" alt="preview image" width="96" height="96"/>
                </div>
              </div>
              <div class="col-sm-12">
                <div class="form-group">
                  <label class="control-label">Image</label>
                  <input name= "image" type="file" (change)="fileChange($event)" placeholder="Upload file" accept=".png,.jpg,.webx" ngModel>
                </div>
              </div>
              <!--NAME-->
              <div class="col-sm-12">
                <div class="form-group">
                  <label class="control-label">Name</label>
                  <input type="text" name="name" class="form-control" required ngModel #name="ngModel">
                  <!--VALIDATION-->
                  <div *ngIf="name.errors && (name.dirty || name.touched)" class="alert alert-danger">
                    <div [hidden]="!name.errors.required">
                      Name is required
                    </div>
                  </div>
                  <!--END_VALIDATON-->
                </div>
              </div>
              <!--NAME-->

              <!--EMAIL-->
              <div class="col-sm-12">
                <div class="form-group">
                  <label class="control-label">Email</label>
                  <input type="text" name="email" class="form-control" required ngModel #email="ngModel">
                  <!--VALIDATION-->
                  <div *ngIf="email.errors && (email.dirty || email.touched)" class="alert alert-danger"
                       pattern='^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$'>
                    <div [hidden]="!email.errors.required">
                      Email is required
                    </div>
                    <div [hidden]="!cemail.errors.pattern">
                      Format is incorrect
                    </div>
                  </div>
                  <!--END_VALIDATON-->
                </div>
              </div>
              <!--EMAIL-->

              <!--PHONE-->
              <div class="col-sm-12">
                <div class="form-group">
                  <label class="control-label">Phone</label>
                  <input type="text" name="phone_number" class="form-control" required ngModel #phone="ngModel">
                  <!--VALIDATION-->
                  <div *ngIf="phone.errors && (phone.dirty || phone.touched)" class="alert alert-danger">
                    <div [hidden]="!phone.errors.required">
                      Phone is required
                    </div>
                  </div>
                  <!--END_VALIDATON-->
                </div>
              </div>
              <!--PHONE-->

              <!--PASSWORD-->
              <div class="col-sm-12">
                <div class="form-group">
                  <label class="control-label">Password</label>
                  <input type="text" name="password" class="form-control" required ngModel #pass="ngModel">
                  <!--VALIDATION-->
                  <div *ngIf="pass.errors && (pass.dirty || pass.touched)" class="alert alert-danger">
                    <div [hidden]="!pass.errors.required">
                      Password is required
                    </div>
                  </div>
                  <!--END_VALIDATON-->
                </div>
              </div>
              <!--PASSWORD-->

              <!--LAT-->
              <div class="col-sm-12">
                <div class="form-group">
                  <label class="control-label">Latitude</label>
                  <input type="number" name="lat" class="form-control" required ngModel #lat="ngModel">
                  <!--VALIDATION-->
                  <div *ngIf="lat.errors && (lat.dirty || lat.touched)" class="alert alert-danger">
                    <div [hidden]="!lat.errors.required">
                      Latitude is required
                    </div>
                  </div>
                  <!--END_VALIDATON-->
                </div>
              </div>
              <!--LAT-->

              <!--LON-->
              <div class="col-sm-12">
                <div class="form-group">
                  <label class="control-label">Longitude</label>
                  <input type="number" name="lon" class="form-control" required ngModel #lon="ngModel">
                  <!--VALIDATION-->
                  <div *ngIf="lon.errors && (lon.dirty || lon.touched)" class="alert alert-danger">
                    <div [hidden]="!lon.errors.required">
                      Longitude is required
                    </div>
                  </div>
                  <!--END_VALIDATON-->
                </div>
              </div>
              <!--LON-->
            </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="submit" href="#create-form" data-toggle="modal" class="btn btn-warning" [disabled]="CreateClient.invalid">Save</button>
      </div>
      </form>
    </div>
  </div>
</div>
<button class="btn btn-warning" (click)="onNewClient(CreateClient)">Create Client</button>
<hr>
<!--<table class="table">-->
  <!--<thead>-->
  <!--<tr>-->
    <!--<th>Image</th>-->
    <!--<th>Id</th>-->
    <!--<th>Name</th>-->
    <!--<th>Email</th>-->
    <!--<th>Phone</th>-->
    <!--<th>Actions</th>-->
  <!--</tr>-->
  <!--</thead>-->
  <!--<tbody>-->
  <!--<tr *ngFor="let o of clientsList;let i=index">-->
    <!--<td><img id="preview" [src]="o.image_path" alt="preview image" width="96" height="96"/></td>-->
    <!--<td>{{o.id}}</td>-->
    <!--<td>{{o.name}}</td>-->
    <!--<td>{{o.email}}</td>-->
    <!--<td>{{o.phone_number}}</td>-->
    <!--<td>-->
      <!--<a class="btn btn-sm btn-warning" routerLink="/clients/{{o.id}}/">Details</a>-->
      <!--<button class="btn btn-sm btn-warning" (click)="onEdit(o,CreateClient)">Edit</button>-->
      <!--<button *ngIf="!o.block" class="btn btn-sm btn-danger" href="#block-form" data-toggle="modal" (click)="blockId=o.id">Block</button>-->
      <!--<button *ngIf="o.block" class="btn btn-sm btn-danger" (click)="onUnblock(o.id)">Unblock</button>-->
      <!--<button class="btn btn-sm btn-danger" (click)="onDelete(o.id)">Delete</button>-->
    <!--</td>-->
  <!--</tr>-->
  <!--</tbody>-->
<!--</table>-->

<div class="row">
  <div class="col-sm-8"></div>
  <div class="col-sm-4"><input #gb type="text" placeholder="Filter" class="form-control"></div>
</div>

<p-dataTable [value]="clientsList" [rows]="10" [paginator]="true" [globalFilter]="gb">

  <p-column header="Image">
    <ng-template let-o="rowData" pTemplate="body">
      <img id="preview" [src]="o.image_path?o.image_path:'#'" alt="preview image" width="96" height="96"/>
    </ng-template>
  </p-column>
  <p-column field="id" header="Id" [sortable]="true"> </p-column>
  <p-column field="name" header="Name" [sortable]="true"> </p-column>
  <p-column field="email" header="Email" [sortable]="true"> </p-column>
  <p-column field="phone_number" header="Phone" [sortable]="true"> </p-column>
  <p-column header="Actions">
    <ng-template let-o="rowData" pTemplate="body">
      <a class="btn btn-sm btn-warning" routerLink="/clients/{{o.id}}/">Details</a>
      <button class="btn btn-sm btn-warning" (click)="onEdit(o,CreateClient)">Edit</button>
      <button *ngIf="!o.block" class="btn btn-sm btn-danger" href="#block-form" data-toggle="modal" (click)="blockId=o.id">Block</button>
      <button *ngIf="o.block" class="btn btn-sm btn-danger" (click)="onUnblock(o.id)">Unblock</button>
      <button class="btn btn-sm btn-danger" (click)="onDelete(o.id)">Delete</button>
    </ng-template>
  </p-column>
</p-dataTable>

<div id="block-form" class="modal fade" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form class="form-edit" enctype="multipart/form-data" #BlockForm="ngForm" (ngSubmit)="onBlock(blockId,BlockForm)">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Block Client</h4>
        </div>
        <div class="modal-body">
          <div class="row">
            <!--NAME-->
            <div class="col-sm-12">
              <div class="form-group">
                <label class="control-label">Block reason</label>
                <input type="text" name="blockreason" class="form-control" required  #reason="ngModel" ngModel>
                <!--VALIDATION-->
                <div *ngIf="reason.errors && (reason.dirty || reason.touched)" class="alert alert-danger">
                  <div [hidden]="!reason.errors.required">
                    Name is required
                  </div>
                </div>
                <!--END_VALIDATON-->
              </div>
            </div>
            <!--NAME-->
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" href="#block-form" data-toggle="modal" class="btn btn-danger" [disabled]="BlockForm.invalid">Block</button>
        </div>
      </form>
    </div>
  </div>
</div>

